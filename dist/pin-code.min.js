!function(a){"use strict";a.module("nb.pincode",["nb.auth"]).provider("$pinCode",[function(){var b=this,c=4,d={empty:"PIN is empty",same:"Pin and its repeat is not the same",size:"Pin is too short"},e={};b.validationMessage=function(a,c){return d[a]=c,b},b.size=function(a){return a&&(c=parseInt(a)),c},b.$get=["$rootScope","$localStorage","$q","$auth","$translate",function(b,f,g,h,i){var j=function(){return j.available()};j.available=function(){return f.pinCode&&""!=f.pinCode},j.size=function(){return c},j.clear=function(){var a=f.pinCode?f.pinCode+"":"";f.pinCode="",b.$emit("$pincode.clear",a),b.$emit("$pincode.change",a)},j.get=function(){return f.pinCode||""},j.validate=function(a,h){var i=g.defer(),j=null;return a&&""!=a?a.length<c?j=e[d.size]:h&&h!=a&&(j=e[d.same]):j=e[d.empty],null==j?(f.pinCode=a,i.resolve(f.pinCode),b.$emit("$pincode.validate",a),b.$emit("$pincode.change",a)):i.reject({reason:j,pin:a,repeat:h}),i.promise},j.authenticate=function(a){var c=g.defer();return j.validate(a).then(function(a){var d=f.pinCode;d==a&&(f.pinAuthData=h(),c.resolve(h()),b.$emit("$pincode.authenticate",a))},function(a){c.reject(a)}),c.promise};var k=[];return a.forEach(d,function(a){k.push(a)}),i(k).then(function(a){e=a},function(a){e=a}),j}]}])}(angular);