!function(e){"use strict";e.module("nb.pincode",["nb.auth"]).provider("$pinCode",[function(){var n=this,t=4,i={empty:"PIN is empty",same:"Pin and its repeat is not the same",size:"Pin is too short"},o={};n.validationMessage=function(e,t){return i[e]=t,n},n.size=function(e){return e&&(t=parseInt(e)),t},n.$get=["$rootScope","$localStorage","$q","$auth","$translate",function(n,a,r,u,c){var p=function(){return p.available()};p.available=function(){return a.pinCode&&""!=a.pinCode},p.size=function(){return t},p.clear=function(){var e=a.pinCode?a.pinCode+"":"";a.pinCode="",n.$emit("$pincode.clear",e),n.$emit("$pincode.change",e)},p.get=function(){return a.pinCode||""},p.validate=function(e,u){var c=r.defer(),p=null;return e&&""!=e?e.length<t?p=o[i.size]:u&&u!=e&&(p=o[i.same]):p=o[i.empty],null==p?(a.pinCode=e,c.resolve(a.pinCode),n.$emit("$pincode.validate",e),n.$emit("$pincode.change",e)):c.reject({reason:p,pin:e,repeat:u}),c.promise},p.authenticate=function(e){var t=r.defer();return p.validate(e).then(function(e){a.pinCode==e&&(a.pinAuthData=u(),t.resolve(u()),n.$emit("$pincode.authenticate",e))},function(e){t.reject(e)}),t.promise};var d=[];return e.forEach(i,function(e){d.push(e)}),c(d).then(function(e){o=e},function(e){o=e}),p}]}])}(angular);